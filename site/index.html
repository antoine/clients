
<html>
	<head>
		<meta charset='utf-8'>
		<link rel="stylesheet" href="/libs/awesomplete/awesomplete.css" />
		<link href="https://fonts.googleapis.com/css?family=Roboto:700" rel="stylesheet"> 
		<style>
ul {padding-left:0;}
ul li {list-style-type:none; padding-left:0;}
body { font-family: 'Roboto', sans-serif; }
input {display:inline !important;}
		</style>
		<script src="/libs/awesomplete/awesomplete.js" async></script>
		<script>
function preloadLists() {
	console.log('preloading');
	var ajax = new XMLHttpRequest();
	ajax.open("GET", "/rest/clients", true);
	ajax.onload = function() {
		var list = JSON.parse(ajax.responseText).map(function(i) { return i.name; });
		console.log(list);
		new Awesomplete(document.querySelector("#dyn_client_name"),{ list: list });
	};
	ajax.send();
}
		</script>
	</head>
	<body onload='preloadLists()'>
		<form method='POST' action='/rest/save'>
			<p>I worked at <input name='client_name' id='dyn_client_name' type='text' placeholder='client name'> for <input name="nb_hours" type="number" min="1" step="0.5" value="4" /> hours</p>
			<hr>

			<ul id='furnitureList'>
				<li>I used <input name="furniture" type="text"  placeholder='something'/> x <input name="quantity" type="number" min="1" step="0.5" value="1" /></li>
			</ul>
			<p><button type='button' onclick='addFurniture()'>+</button></p>
			<hr>

			<button>save</button>
		</form>
	</body>
	<script>

var nbFurnitures =1 ;
function addFurniture() {
	console.log('plus one');
	var markerElement = document.getElementById('furnitureList');
	var line = document.createElement("li");
	var furniture= document.createElement("input");
	furniture.type = "text";
	furniture.placeholder = 'used';
	furniture.name = "furniture" + (nbFurnitures++);
	var quantity= document.createElement("input");
	quantity.type = "number";
	quantity.name = "quantity" + (nbFurnitures);
	quantity.min = 1;
	quantity.step= 0.5;
	quantity.value= 1;

	line.appendChild(document.createTextNode('and '));
	line.appendChild(furniture);
	line.appendChild(document.createTextNode(' x '));
	line.appendChild(quantity);

	markerElement.appendChild(line);
}
	</script>
</html>
